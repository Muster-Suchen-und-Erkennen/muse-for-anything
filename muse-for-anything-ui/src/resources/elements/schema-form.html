<template>
    <require from="./validity-indicator"></require>
    <require from="./type-root-form"></require>
    <require from="./type-definition-form"></require>
    <require from="./object-form"></require>
    <require from="./text-form"></require>
    <require from="./number-form"></require>
    <require from="./boolean-form"></require>

    <template if.bind="schemaType === 'custom'">
        <div class="card px-2 py-2" if.bind="extraType === 'typeRoot'">
            <type-root-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
                required.bind="required" debug.bind="debug" value-push.bind="valuePush"
                value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
            </type-root-form>
        </div>
        <div class="card px-2 py-2" if.bind="extraType === 'typeDefinition'">
            <type-definition-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
                required.bind="required" debug.bind="debug" value-push.bind="valuePush"
                value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
            </type-definition-form>
        </div>
    </template>
    <template if.bind="schemaType === 'object'">
        <div class="card px-2 py-2">
            <object-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
                required.bind="required" debug.bind="debug" value-push.bind="valuePush"
                value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
            </object-form>
        </div>
    </template>
    <template if.bind="schemaType === 'array'">
        <p class="font-semibold">Array ${label}:</p>
        <p class="m-0">${value | json}</p>
    </template>
    <template if.bind="schemaType === 'string'">
        <text-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
            required.bind="required" debug.bind="debug" value-push.bind="valuePush"
            value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
        </text-form>
    </template>
    <template if.bind="schemaType === 'number'">
        <number-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
            required.bind="required" debug.bind="debug" value-push.bind="valuePush"
            value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
        </number-form>
    </template>
    <template if.bind="schemaType === 'boolean'">
        <boolean-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="schema"
            required.bind="required" debug.bind="debug" value-push.bind="valuePush"
            value.from-view="value & viewSignal:'update-values'" valid.from-view="valid & viewSignal:'revalidate'">
        </boolean-form>
    </template>
    <template if.bind="schemaType === 'enum'">
        <p class="font-semibold">Enum ${label}:</p>
        <p class="m-0">${initialData != null ? initialData : 'â€“'}</p>
    </template>
    <template if.bind="schemaType === 'const'">
        <div class="w-full flex items-center">
            <p class="font-semibold" for="">${label}</p>
            <validity-indicator class="ml-1" valid.bind="valid"></validity-indicator>
        </div>
        <p class="m-0">${value}</p>
    </template>
    <template if.bind="schemaType === 'unknown'">
        <p class="font-semibold">Unknown Type ${label}:</p>
        <p class="m-0" style="white-space: pre;">${initialData | json}</p>
    </template>

    <template if.bind="debug">
        <details>
            <summary>Schema</summary>
            <p>${schema.resolvedSchema.originId} ${schema.resolvedSchema.originRef}</p>
            ${schema.resolvedSchema | json}
        </details>
        <details>
            <summary>Data</summary>
            ${value | json}
        </details>
    </template>
</template>
