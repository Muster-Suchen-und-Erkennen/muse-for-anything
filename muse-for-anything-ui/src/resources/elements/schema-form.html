<template>
    <require from="./validity-indicator"></require>
    <require from="./type-root-form"></require>
    <require from="./type-definition-form"></require>
    <require from="./object-form"></require>
    <require from="./array-form"></require>
    <require from="./text-form"></require>
    <require from="./number-form"></require>
    <require from="./boolean-form"></require>
    <require from="./enum-form"></require>

    <template if.bind="schemaType === 'custom'">
        <div class="${noCard ? '' : 'card px-2 py-2 mt-4'}" if.bind="extraType === 'typeRoot'">
            <type-root-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
                required.bind="required" debug.bind="debug" value-push.bind="valuePush" value.bind="value"
                valid.from-view="valid" dirty.from-view="dirty">
            </type-root-form>
        </div>
        <div class="${noCard ? '' : 'card px-2 py-2 mt-4'}" if.bind="extraType === 'typeDefinition'">
            <type-definition-form key.bind="key" label.bind="label" initial-data.bind="initialData"
                schema.bind="activeSchema" required.bind="required" debug.bind="debug" value-push.bind="valuePush"
                value.bind="value" valid.from-view="valid" dirty.from-view="dirty">
            </type-definition-form>
        </div>
    </template>
    <template if.bind="schemaType === 'object'">
        <div class="${noCard ? '' : 'card px-2 py-2 mt-4'}">
            <object-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
                required.bind="required" debug.bind="debug" value-push.bind="valuePush" value.bind="value"
                valid.from-view="valid" dirty.from-view="dirty">
            </object-form>
        </div>
    </template>
    <template if.bind="schemaType === 'array'">
        <array-form class="mt-4 block" key.bind="key" label.bind="label" initial-data.bind="initialData"
            schema.bind="activeSchema" required.bind="required" debug.bind="debug" value-push.bind="valuePush"
            value.bind="value" valid.from-view="valid" dirty.from-view="dirty">
        </array-form>
    </template>
    <template if.bind="schemaType === 'string'">
        <text-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
            required.bind="required" debug.bind="debug" value.bind="value" valid.from-view="valid"
            dirty.from-view="dirty">
        </text-form>
    </template>
    <template if.bind="schemaType === 'number'">
        <number-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
            required.bind="required" debug.bind="debug" value.bind="value" valid.from-view="valid"
            dirty.from-view="dirty">
        </number-form>
    </template>
    <template if.bind="schemaType === 'boolean'">
        <boolean-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
            required.bind="required" debug.bind="debug" value.bind="value" valid.from-view="valid"
            dirty.from-view="dirty">
        </boolean-form>
    </template>
    <template if.bind="schemaType === 'enum'">
        <enum-form key.bind="key" label.bind="label" initial-data.bind="initialData" schema.bind="activeSchema"
            required.bind="required" debug.bind="debug" value.bind="value" valid.from-view="valid"
            dirty.from-view="dirty">
        </enum-form>
    </template>
    <template if.bind="schemaType === 'const'">
        <div class="w-full flex items-center">
            <p class="font-semibold" for="">${label}</p>
            <validity-indicator class="ml-1" valid.bind="valid"></validity-indicator>
        </div>
        <p class="m-0">${value}</p>
    </template>
    <template if.bind="schemaType === 'unknown'">
        <p class="font-semibold">Unknown Type ${label}:</p>
        <p class="m-0" style="white-space: pre;">${initialData | json}</p>
    </template>

    <template if.bind="debug">
        <details>
            <summary>Schema</summary>
            <p>${schema.resolvedSchema.originId} ${schema.resolvedSchema.originRef}</p>
            ${schema.resolvedSchema | json}
        </details>
        <details>
            <summary>Data</summary>
            ${value | json}
        </details>
    </template>
</template>
